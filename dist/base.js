"use strict";angular.module("logicToolsApp",["ui.router"]).config(function(t,l){l.otherwise("/"),t.state("main",{url:"/",templateUrl:"templates/main.html",controller:"MainCtrl as main"}).state("truthTables",{url:"/truth-tables",templateUrl:"templates/truth-table.html",controller:"TruthTableCtrl as table"}).state("fitchSystems",{url:"/fitch",templateUrl:"templates/fitch.html",controller:"FitchCtrl as fitch"})});
"use strict";angular.module("logicToolsApp").controller("FitchCtrl",function(e,t,i,s,r,n,h,c,o){function u(){this.marginLeft=20,this.premise="",this.premiseGraph=i["new"](),this.selected=[],this.showDisjoinField=!1,this.structure=e["new"](),this.valueToDisjoin=""}function p(e,t){this.structure.entail(e),g(this.premiseGraph,e,t)}function a(e,t){_.forEach(e,function(e){p.call(this,e,t)}.bind(this))}function l(e){return _.filter(e,"checked")}function m(e,t){var i=_.map(t,"id");return l(e).filter(function(e){return-1!==i.indexOf(e.scopeId)})}function d(e,t){return t.length=0,_.map(e,function(e){return e.checked=!1,e})}function f(e){var t,i;return t=_.filter(e,function(e){return e.isOr(e.digest())}),1!==t.length?null:(i=_.filter(e,function(e){return e.isImplication(e.digest())}),i.length!==e.length-1?null:{disjunctions:t,implications:i})}function g(e,t,i){_.forEach(i,function(i){e.appendChildNode(i,t)})}u.call(this),this.assume=function(){var e,i;i=t["new"]({value:this.premise}),o.validate(i)&&(this.structure.openScope(i),e=this.structure.getCurrentScope(),i.scopeId=e.id,i.scopeLayer=e.layer,this.premiseGraph.appendNode(i),this.premise="")},this.refresh=function(){u.call(this)},this.closeDisjoinField=function(){this.showDisjoinField=!1,this.valueToDisjoin=""},this.disjoinPremise=function(){var e,t,i;t=this.structure.getCurrentScope(),i=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),i.length&&this.valueToDisjoin&&(e=n.introduction(this.valueToDisjoin,i,t),this.showDisjoinField=!1,this.valueToDisjoin="",e&&a.call(this,e,i))},this.andIntroduction=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),e.length<2||(t=r.introduction(e,i),t&&a.call(this,t,e))},this.andElimination=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),1===e.length&&(t=r.elimination(e[0],i),t&&a.call(this,t,e))},this.negationIntro=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),2===e.length&&(t=c.introduction(e[0],e[1],i),t&&p.call(this,t,e))},this.negationElim=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),e.length>1||(t=c.elimination(e[0],i),t&&p.call(this,t,e))},this.implicationIntro=function(){var e,t,i;e=this.structure.closeScope(),t=this.structure.getCurrentScope(),i=h.introduction(t,e),p.call(this,i,[e.head,e.last]),d(this.premiseGraph.premises,this.selected)},this.implicationElim=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),2===e.length&&(t=h.elimination(e[0],e[1],i),t&&p.call(this,t,e))},this.orElimination=function(){var e,t,i,s;t=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),e.length<3||(s=f(e),s&&(i=n.elimination(s,t),i&&p.call(this,i,s)))},this.orIntroduction=function(){this.showDisjoinField=!0},this.reiterate=function(){var e,i,s;i=this.structure.getCurrentScope(),s=m(this.premiseGraph.premises,this.structure.scopes),e=s.map(function(e,s){return t["new"]({scopeLayer:i.layer,scopeId:i.id,value:e.value})}),_.forEach(e,function(e){p.call(this,e,s)}.bind(this)),d(this.premiseGraph.premises,this.selected)},this["delete"]=function(){var e,t;e=l(this.premiseGraph.premises),_.forEach(e,function(e){this.premiseGraph.removeNode(e)}.bind(this)),t=_.map(this.premiseGraph.premises,"scopeId"),this.structure.reset(this.premiseGraph.premises)},this.biconditionalIntro=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),2===e.length&&(t=s.introduction(e,i),t&&a.call(this,t,e))},this.biconditionalElim=function(){var e,t,i;i=this.structure.getCurrentScope(),e=m(this.premiseGraph.premises,this.structure.scopes),d(this.premiseGraph.premises,this.selected),1===e.length&&(t=s.elimination(e[0],i),t&&a.call(this,t,e))}});
"use strict";angular.module("logicToolsApp").controller("MainCtrl",function(t){this.goToTruth=function(){t.path("/truth-tables")},this.goToFitch=function(){t.path("/fitch")}});
"use strict";angular.module("logicToolsApp").controller("MenuCtrl",function(){});
"use strict";angular.module("logicToolsApp").controller("TruthTableCtrl",function(e){function t(e){return _.chain(e.value).keys().map(function(e,t){return e in this.labels?this.labels[e]:e}.bind(e)).value()}function i(e){var t,i;return t=[],i=e.value,_.each(_.values(i),function(e,i){_.each(e,function(e,s){t[s]||t.push([]),t[s][i]=e})}),t}this.premises=[],this.selectedPremises=[],this.premise="",this.truthTable={},this.build=function(){this.premise&&(e.generate(this.premise),this.truthTable.header=t(e),this.truthTable.rows=i(e))}});
"use strict";angular.module("logicToolsApp").factory("formula",function(){function n(n){return/[=][>]/g.exec(n)}function r(n){return/[&]/g.exec(n)}function u(n){return/[|]/g.exec(n)}function t(n){return/[<][=][>]/g.exec(n)}return{resultFn:function(e){var c;return t(e)?c=function(n,r){return(!n||r)&&(!r||n)}:n(e)?c=function(n,r){return!n||r}:r(e)?c=function(n,r){return n&&r}:u(e)&&(c=function(n,r){return n||r}),c}}});
angular.module("logicToolsApp").service("syntaxChecker",function(){function n(n){return!n.value}this.validate=function(e){return!n(e)}});
angular.module("logicToolsApp").factory("FitchStack",function(e){function t(e){i=0,this.scopes=[p],this.scopeHistory=[p]}function s(e){return e.slice(-1)[0]}function o(t){var s=_.chain(t).map(function(e){return{layer:e.scopeLayer,id:e.scopeId}}).uniqBy("id").map(function(t){return e["new"]({layer:t.layer,id:t.id})}).value();return _.find(s,{layer:0})?s:[p].concat(s)}function n(e){return _.groupBy(e,"scopeId")}function r(e,t){return _.chain(e).map(function(e){return e.items=_.sortBy(n(t)[e.id],"scopeId"),e.blur(),e}).value()}function c(e,t){var s,o,n,r;return n=[p.id],s=0,_.forEach(t,function(e){r=n.indexOf(e.scopeId),s<=e.scopeLayer&&-1===r?n.push(e.scopeId):s>e.scopeLayer&&-1!==r&&n.splice(o,1),s=e.scopeLayer,o=r}),_.filter(e,function(e){return-1!==n.indexOf(e.id)})}var i,p;return i=0,p=e["new"]({layer:i}),t.prototype.closeScope=function(){var e,t;return e=_.remove(this.scopes,"isFocused"),(t=this.scopes[this.scopes.length-1])?(t.focus(),t.layer=--i,e[0]):e[0]},t.prototype.openScope=function(t){var s=e["new"]({head:t,layer:++i});this.scopes.length&&(this.scopes=_.map(this.scopes,function(e){return e.blur(),e})),this.scopes.push(s),this.scopeHistory.push(s)},t.prototype.entail=function(e){var t=this.getCurrentScope();t.append(e)},t.prototype.getCurrentScope=function(){return _.filter(this.scopes,"isFocused")[0]},t.prototype.reset=function(e){var t;this.scopes.length=0,this.scopeHistory.length=0,this.scopes=r(o(e),e),t=_.find(this.scopes,{id:s(e).scopeId}),t.focus(),i=t.layer,this.scopeHistory=this.scopes,this.scopes=c(this.scopes,e)},{"new":function(e){var s=e||{};return new t(s)}}});
angular.module("logicToolsApp").factory("PremiseTree",function(){function e(e){this.premises=[],this.proofTree=[]}function r(e,r){var n=_.filter(e,function(e){return e.id!==r.id});return h(n,r)}function n(e,r){return _.filter(e,function(e){return e!==r})}function i(e,r){return _.filter(e,function(e){return!!o(r,e)})}function t(e,r,t){var o=u(r,t);return _.chain(e).filter(function(e,r){return r!==o}).map(function(e){var o=n(e,t.id);return i(o,r)}).value()}function o(e,r){return _.find(e,{id:r})}function s(e,r,n){var i=u(r,n);return e[i]}function u(e,r){return _.chain(e).map("id").indexOf(r.id).value()}function f(e,r,n){return _.filter(e,function(e,i){return-1===n.indexOf(r[i].id)})}function p(e,r){return _.filter(e,function(e){return-1===r.indexOf(e.id)})}function c(e,r,n){return _.chain(n).map(function(n){var i=o(r,n)||{};return s(e,r,i)}).flattenDeep().filter(function(e){return!!e}).value()}function h(e,r){var n,i,t;return t=0,_.map(e,function(e){return i===e.scopeLayer&&n!==e.scopeId&&t++,i=e.scopeLayer,n=e.scopeId,e.scopeLayer+=t,e})}return e.prototype.appendNode=function(e){this.proofTree.push([]),this.premises.push(e)},e.prototype.appendChildNode=function(e,r){var n,i;n=this.premises.indexOf(e),i=this.premises.indexOf(r),this.proofTree[n].push(r.id),-1===i&&(this.premises.push(r),this.proofTree.push([]))},e.prototype.removeNode=function(e){var n,i;for(n=s(this.proofTree,this.premises,e);n.length;)i=c(this.proofTree,this.premises,n),this.proofTree=f(this.proofTree,this.premises,n),this.premises=p(this.premises,n),n=i;return this.proofTree=t(this.proofTree,this.premises,e),this.premises=r(this.premises,e),this.premises},{"new":function(r){return new e(r)}}});
angular.module("logicToolsApp").factory("Scope",function(){function t(t){this.id=t.id||++e,this.layer=t.layer,this.isFocused=!0,this.items=[],t.head&&this.items.push(t.head)}var e=0;return t.prototype.append=function(t){this.items.push(t)},t.prototype.blur=function(){this.isFocused=!1},t.prototype.focus=function(){this.isFocused=!0},t.prototype.remove=function(t){var e=t.indexOf(t);return this.items.splice(e,1)},Object.defineProperty(t.prototype,"head",{get:function(){return this.items[0]}}),Object.defineProperty(t.prototype,"last",{get:function(){return this.items[this.items.length-1]}}),Object.defineProperty(t.prototype,"size",{get:function(){return this.items.length}}),{"new":function(e){var i=e||{};return new t(i)}}});
angular.module("logicToolsApp").service("fitchBicondition",function(n){function e(n,e){var i,t;return i=n.digest(),t=e.digest(),n.isImplication(i)&&e.isImplication(t)}function i(n,e){var i,t,o,u,r,d;return i=n.digest(),t=e.digest(),o=n.getExpandedConclusion(i),u=n.getExpandedAssumption(i),r=e.getExpandedConclusion(t),d=e.getExpandedAssumption(t),o===d&&r===u}function t(e,i,t){var o,u;return o=i.split(/[<][=][>]/g),u=o.length,_.map(o,function(i){return u--,n["new"]({scopeLayer:t.layer,scopeId:t.id,value:e.expand(i)+"=>"+e.expand(o[u])})})}function o(e,i){return _.map(e,function(e){var t=e.digest();return n["new"]({scopeLayer:i.layer,scopeId:i.id,value:e.getExpandedConclusion(t)+"<=>"+e.getExpandedAssumption(t)})})}this.introduction=function(n,t){return e(n[0],n[1])&&i(n[0],n[1])?o(n,t):null},this.elimination=function(n,e){var i=n.digest();return n.isBicon(i)?t(n,i,e):null}});
angular.module("logicToolsApp").service("fitchConjunction",function(n){function e(n,e){return _.chain(n).map(function(t){return u(t,n,e)}).flattenDeep().value()}function u(e,u,t){return _.map(u,function(u){return n["new"]({scopeLayer:t.layer,scopeId:t.id,value:e+"&"+u})})}this.introduction=function(n,u){var t=_.map(n,function(n){return n.isCompound()?"("+n.value+")":n.value});return e(t,u)},this.elimination=function(e,u){var t=e.digest();return _.chain(t).split(/\&+/).map(function(t){var i=e.expand(t);return n["new"]({scopeLayer:u.layer,scopeId:u.id,value:e.unwrap(i)})}).value()}});
"use strict";angular.module("logicToolsApp").service("fitchDisjunction",function(n){function t(n){return _.chain(n).map(function(n){return n.expand(n.getConclusion(n.digest()))}).uniq().value()}function e(n){return _.map(n,function(n){return n.expand(n.getAssumption(n.digest()))})}function i(n,t,e){return _.chain(t).map(function(t){return u([n,t],e)}).flattenDeep().value()}function u(t,e){var i=t.length;return _.map(t,function(u){return i--,n["new"]({scopeLayer:e.layer,scopeId:e.id,value:u+"|"+t[i]})})}function r(n,t){var e,i;return e=t.digest(),i=n.slice(),_.filter(e.split(/\|+/),function(n){return-1!==i.indexOf(t.expand(n))}).length===n.length}this.elimination=function(i,u){var o,c;return c=e(i.implications),o=t(i.implications),1!==o.length?null:r(c,i.disjunctions[0])?n["new"]({scopeLayer:u.layer,scopeId:u.id,value:o[0]}):null},this.introduction=function(n,t,e){var u=_.map(t,function(n){return n.isCompound()?"("+n.value+")":n.value});return i(n,u,e)}});
"use strict";angular.module("logicToolsApp").service("fitchImplication",function(e){function a(a,n,u){var i,l,o,t;return o=a.digest(),i=a.getAssumption(o),t=a.hasNegation(i),i=a.expand(i),i=t?i:a.unwrap(i),i===n.value?(l=a.getConclusion(o),e["new"]({scopeLayer:u.layer,scopeId:u.id,value:a.expand(l)})):null}this.introduction=function(a,n){var u,i,l,o,t,s;return u=n.head,i=n.last,l=u.digest(),o=i.digest(),t=u.isCompound(u.value)?"("+u.value+")":u.value,s=i.isCompound(i.value)?"("+i.value+")":i.value,u.hasNegation(l)&&l!==u.value&&(t=u.value),i.hasNegation(o)&&o!==i.value&&(s=i.value),e["new"]({scopeLayer:a.layer,scopeId:a.id,value:t+"=>"+s})},this.elimination=function(e,n,u){var i=a(n,e,u)||a(e,n,u);return i?(i.scopeLayer=u.layer,i.scopeId=u.id,i):null}});
"use strict";angular.module("logicToolsApp").service("fitchNegation",function(n){function e(n,e){return n.isImplication()&&e.isImplication()}function t(n,e){return c(n)===c(e)}function i(n,e){return u(n,e)||u(e,n)}function r(n,e){return o(n,e)||o(e,n)}function o(n,e){return l(n)===s(e)}function u(n,e){var t,i;return t=g(n),i=g(e),n.hasNegation(t)&&!n.hasNegation(i)}function a(n){return n.replace(/\~+/g,"")}function c(n){var e,t;return e=n.digest(),t=n.getAssumption(e),n.expand(t)}function s(n){var e,t,i;return e=n.digest(),t=n.getConclusion(e),i=n.expand(a(t)),n.hasNegation(t)?"~"+i:i}function l(n){var e,t;return e=n.digest(),t=n.getConclusion(e),n.expand(a(t))}function g(n,e){var e,t;return e=n.digest(),t=n.getConclusion(e)}this.introduction=function(o,u,a){var s;return e(o,u)&&t(o,u)&&i(o,u)&&r(o,u)?(s=c(o),n["new"]({scopeLayer:a.layer,scopeId:a.id,value:"~"+s})):null},this.elimination=function(e,t){var i,r,o;return i=e.digest(),o=e.value.match(/^\~+/)[0],o.length<=1?void 0:(r=o.slice(2)+e.removeNegation(i),r=e.hasNegation(r)?e.expand(r):e.unwrap(e.expand(r)),n["new"]({scopeLayer:t.layer,scopeId:t.id,value:r}))}});
angular.module("logicToolsApp").factory("Premise",function(){function t(t){this.labels={},this.id=++v,this.scopeLayer=t.scopeLayer,this.scopeId=t.scopeId,this.value=c(t.value)}function e(t){return t.match(/[(]{1}[\w~<=>|&]+(?=[)]{1})[)]{1}/g)}function n(t,e){var n;return n=_.keys(t),Array.prototype.map.call(e,function(e,r){return-1!==n.indexOf(e)?t[e]:e}).join("")}function r(t){return e(t)?e(t):[t]}function o(t,e,n){var r;return e=e.replace(/[|]/g,"[|]"),r=new RegExp("[(]"+e+"[)]","g"),t.replace(r,n)}function i(t,e){var n,r;return n=e.slice(),r=_.keys(t),_.map(r,function(e){return n=n.replace(e,t[e])}).slice(-1)[0]}function u(t){return t.split(s)}function a(t){var e;if(t)return e=t.match(/[(]{1}([\w\W]+)[)]{1}/),e?e[1]:t}function c(t){return t.replace(/\s+/g,"")}var p,s,v;return p=/^\~+/,s=/[=][>]/g,v=0,t.prototype.digest=function(t){var i,u,c,p,s;for(s=this.value,i=[],p={},c=0;i;)i=e(s),_.each(r(s),function(e){u=e.slice(),p[++c]=n(p,u),s=o(s,a(e),c),t&&t(e,s,c)});return this.labels=_.assign({},p),s},t.prototype.isImplication=function(t){var e=t||this.value;return!!e.match(s)},t.prototype.isAnd=function(t){var e=t||this.value;return/[&]/g.exec(e)},t.prototype.isOr=function(t){var e=t||this.value;return/[|]/g.exec(e)},t.prototype.isBicon=function(t){var e=t||this.value;return/[<][=][>]/g.exec(e)},t.prototype.expand=function(t){var e,n,r,o;return n=t.replace(p,""),r=this.labels,e=r[n]||this.removeNegation(t),o=this.hasNegation(t)?t.match(p)[0]:"",o+i(r,e)},t.prototype.getAssumption=function(t){var e,n;return e=t||this.value,n=u(e),n?n[0]:void 0},t.prototype.getConclusion=function(t){var e,n;return e=t||this.value,n=u(e),n?n[1]:void 0},t.prototype.getExpandedAssumption=function(t){var e,n;return e=t||this.value,n=u(e),n?this.expand(n[0]):void 0},t.prototype.getExpandedConclusion=function(t){var e,n;return e=t||this.value,n=u(e),n?this.expand(n[1]):void 0},t.prototype.getPrimitives=function(t){var e=t||this.value;return e.match(/\w+/g)},t.prototype.removeNegation=function(t){var e=t||this.value;return e.replace(p,"")},t.prototype.hasNegation=function(t){var e=t||this.value;return!!e.match(p)},t.prototype.isCompound=function(t){var e=t||this.value;return!!e.match(/[<=>|&]+/)},t.prototype.unwrap=function(t){return a(t||this.value)},{"new":function(e){return new t(e)}}});
"use strict";angular.module("logicToolsApp").service("tableGenerator",function(t,e){function n(){this.value={},this.labels={}}function a(t){return _.uniq(t.match(/[^~<=>()&|\s]/g))}function i(t,e){var n,a,i;return n=_.keys(t),i=Math.pow(2,n.length),a=0,_.mapValues(t,function(t,e){return r.getAtomicValue(++a,i)})}function u(t){var e,n;return e={},_.forEach(t,function(t,a){e[t]=[],n=i(e,a)}),n}function s(t){var e;return e=_.assign({},t),l.digest(function(t,n,a){e[a]=r.getCompoundValue(t,a,e)}),e}var l,r;this.generate=function(i){var o,c;o=[],this.premise=i,l=t["new"]({value:i}),r=e["new"](),n.call(this),c=a(i),this.value=u(c),this.value=_.assign({},this.value,s(this.value)),this.labels=l.labels},n.call(this)});
angular.module("logicToolsApp").factory("Table",function(formula){function Table(){}function _negateColumn(value,premise){var negation,result,atomic,operator;return negation=premise.match(/[~]/g),atomic=premise.match(/\w+/g),result=negation?_.map(value[atomic[0]],function(val,key){return operator=negation.join("").replace(/[~]/g,"!"),Number(eval(operator+val))}):value[atomic[0]]}return Table.prototype.getCompoundValue=function(e,t,o){var a,n,r,u,l,i,m,c;for(i=formula.resultFn(e),m=e.match(/\w+|[~]+\w|\d+|[~]+\d/g),c=[],a=_negateColumn(o,m[0]),n=_negateColumn(o,m[1]),r=0;a.length>r;)u=a[r],l=n[r],c.push(Number(i(u,l))),r++;return c},Table.prototype.getAtomicValue=function(e,t){var o,a,n,r,u;for(o=[],a=0,n=1,u=1,r=Math.pow(2,e);t>=n;)n>1/r*t*u&&(a=1-a,u++),o.push(a),n++;return o},{"new":function(){return new Table}}});
//# sourceMappingURL=maps/base.js.map